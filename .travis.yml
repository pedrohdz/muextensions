dist: xenial
language: python
python:
  - "3.5"
  - "3.6"
  - "3.7"

install:
  - pip install --upgrade pip
  - pip install --upgrade-strategy eager --upgrade tox-travis codecov .[test]

script:
  - tox
  - coverage combine .coverage-py*
  - codecov

jobs:
  include:
    - stage: Publish to PyPI
      python: "3.7"
      # Do not inherit `install` and `script` from above.  No reason to run
      # checks again on deploy.
      install: 'true'
      script: 'true'
      deploy:
        provider: pypi
        on:
          tags: true
          repo: pedrohdz/muextensions
          condition: '$TRAVIS_TAG =~ ^v[[:digit:]]+\.[[:digit:]]+\.[[:digit:]]+$'
        user: '@token'
        # -- PyPI - Production
        password:
          secure: lInroEnWgtxp8fABmvYOnvYtgl6Ndbcr22AckuVgEcFvFthLXqzoWHqtus3kkFiyyAn6ZOqSLDBDS9DeChqJa6TsL0Mvq+bRSCVfZ0aP+5zMgLEXVDJ6U3EM6R5BgpiAxRRvIZVH6FG7U0z5Uo+rGT0FyYCfFRW1D1htZs/VQ9zvefGAkff1lMwqZ1AOwF5/2HUWV5cuA24I8hmqbXhG9cw7IdLDovNf8bnstsx76Y5vmS+UC5qYbYh3WOF/nQc/pozIXcZw6Nu68tDYdDMrstOCGC5m2jJq2F7Bi9/4eyU5G38SzF16HXgKqpc5yabEqoQ+7Fm8WATlPKykP5odH8xdppn1ayoRemUgRh8HUDiiqQ511PJeASCjCW392havMvwCnqWdypxTNivmsJMF/4sANQ/6RM5e8y41gGuUKXqL1sOEcScWdeqC1F6/LiEK/S78Kk05thqjq5j33gn2SNPZ36LgM3vsBadmmll2ucwhIVDu+ezzk7VyNkrXHdR+76aflJyi0YrpQ44o9iHbFBLuRmrNmRzEgPCyygQm4WWp71+gFFSIz/uMArvaCQc6zQWVhJ3BUt6MgL+RHHiBbC2nQRWCrRao9mNIFE4BHg8DFA//rClitDWxgGSwxMRE2ZomFgNsZn/7c1d16AUyNa4g5BYWTsmXHREn1LYYzsQ=
        # -- PyPI - Testing
        #server: https://test.pypi.org/legacy/
        #password:
        #  secure: XtEyLvhpJCVVmO6+HORWOitefPIpvQToZO+bH8FCvOrc62BYug+8KCD+y0y2v9hlYUT6dBaHbN+bmIREVFEK9/lrJGotQU85QKP3we80RM6vmstPK8nPF8w2Jx2mxVOv0x4Wsq3BvFqW3cKR0yN2fkmbINIl7eDGCYUThSpVJR0oiZHZfhviG9Qg+99GozNwQV5o23f14gKhoSVTszQYz0t4n3bZZ19DbDZqmHaYUN/0bIriW24K+dMXd1yk5ot4EN8ojzqidUBBRMIT76qYokp3u/ZPFTNoikcRK60RunpHgx7P2UHLl6nEq6EJWinRcHOnQk8jlhnTuyaCuexsRE/FC/pvWaPlvQWx/9JoawArnukCWhPa/gWVPpS4b4GoshpRPg18yFSHvc66JdO3EtNH3MBdVTMRpbrx8heIAM/RrOekP/yL6dcPxPk5qG8BS8LCqsb4U2XK3RFHnaUn9SaK0mevd90iDq/TbJrbX4/htKZNSZTfLLPyY+SvphSbv5E1u68O6ED2rN992LLP8F+g2+3qNEh6iAfyQZ1fYETOEEcXcasVDknz+P+Sts7t6zt4Av/gVS129duJ4MwQ2vjxhi5bfdrTG8dPnKjKBqqngdljgGrnPByr8yZnf+UK7W82X5S50xtRHbSYEYewVRYcpJPw47H0wpZhM0z6bKw=
